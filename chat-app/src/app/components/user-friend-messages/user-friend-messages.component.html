<div class="chat-window">
    <div *ngIf="!selectedChat" class="no-chat-selected">
        <p>Selecione uma conversa.</p>
    </div>

    <ng-container *ngIf="selectedChat">
        <div class="user" *ngIf="selectedChat">
            <h2>
                {{ selectedChat.name }}
                <button (click)="deleteFriend(selectedChat.email)">🗑️</button>
            </h2>
            <h3>{{ selectedChat.email }}</h3>
        </div>

        <div class="messages" #messagesContainer>
            <app-message *ngFor="let msg of messages" 
                [id]="msg.id" 
                [senderEmail]="msg.senderEmail"
                [senderName]="msg.senderName" 
                [content]="msg.content" 
                [timestamp]="msg.timestamp"
                [localUser]="msg.senderEmail.trim().toLowerCase() === userEmail"
                (edit)="onEditMessage($event)"
                (delete)="onDeleteMessage($event)">
            </app-message>
        </div>

        <div class="input-area">
            <span>ICON</span>
            <input type="text" #msgInput placeholder="Digite sua mensagem..." />
            <button (click)="send(msgInput.value); msgInput.value=''">Enviar</button>
        </div>
    </ng-container>
</div>